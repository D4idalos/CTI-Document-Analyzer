(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{2982:function(t,e,r){"use strict";r.r(e);var o=r(29),c=(r(23),r(27),r(53)),n=r(154),l={components:{ValidationObserver:c.a},props:{fromFooter:{default:!1,type:Boolean}},data:()=>({isResponse:!1,loading:!1,subscriberModel:{email_id:"",subscription:[]},subscriptionList:[],currentSubscription:[]}),mounted(){this.getSubscriptions(),this.$root.$on("bv::modal::show",((t,e)=>{"subscriber-modal"===e&&(this.isAuthenticated&&this.userDetails&&Object.keys(this.userDetails).length>0&&this.computedSubscriptionList(),this.getSubscribedList(),this.$route.meta.slug&&this.selectCurrentSubscription(this.$route.meta.slug))}))},methods:{validateList(){return this.subscriberModel.subscription.length},getSubscriptions(){this.$axios.$get("".concat("https://cyware.com").concat("/api-social","/subscription/")).then((data=>{if(this.isAuthenticated&&this.userDetails&&Object.keys(this.userDetails).length>0)this.computedSubscriptionList();else{for(var i of data)i.is_subscribed=!1;this.subscriptionList=data}}))},computedSubscriptionList(){this.subscriptionList=JSON.parse(JSON.stringify(this.userDetails.subscription.filter((t=>!t.is_subscribed))))},getSubscribedList(){if(this.isAuthenticated&&this.userDetails&&Object.keys(this.userDetails).length>0){var t=[];for(var e of this.userDetails.subscription)e.is_subscribed&&t.push(e.title);return t.join(", ")}return!1},selectCurrentSubscription(t){var e=this.subscriptionList.findIndex((e=>e.slug===t));if(e>=0){var r=this.subscriptionList[e];r.is_subscribed=!0,this.$set(this.subscriberModel,"subscription",[...this.subscriberModel.subscription,r])}},deSelectSubscription(t){t.is_subscribed=!1;var e=this.subscriberModel.subscription.findIndex((e=>e.slug===t.slug));e>=0&&this.subscriberModel.subscription.splice(e,1)},disableItem(t){return!!(this.isAuthenticated&&this.userDetails&&Object.keys(this.userDetails).length>0&&t.is_subscribed)},onSubmit(){if(this.validateList()<=0)return!1;this.isAuthenticated&&this.userDetails&&Object.keys(this.userDetails).length>0&&(this.subscriberModel.email_id=this.userDetails.email),this.loading=!0,this.$axios.$post("".concat("https://cyware.com").concat("/api-social","/subscription/"),this.subscriberModel).then((data=>{data&&(this.isResponse=!0,this.isAuthenticated&&this.getUserProfile()),this.gtag_report_conversion()})).catch((t=>{t&&(this.loading=!1,403!==t.response.status&&401!==t.response.status||(window.location="/login?source=enterprise"))}))},gtag_report_conversion:t=>(gtag("event","conversion",{send_to:"AW-712433333/jREMCOK5uP4BELW929MC",event_callback:function(){void 0!==t&&(window.location=t)}}),!1),getUserProfile(){var t=this;return Object(o.a)((function*(){yield t.$axios.$get("".concat("https://cyware.com").concat("/api-social","/user-profile-details"),{headers:{"Content-Type":"application/json",Authorization:t.$cookies.get("auth._token.local")}}).then((data=>{t.$store.commit("makeData",{reference:"USER_PROFILE",data:data})})).catch((e=>{e&&(t.loading=!1,403!==e.response.status&&401!==e.response.status||t.$store.commit("resetAuthentication"))}))}))()},onModelHide(){this.subscriberModel={subscription:[],email_id:""},this.getSubscriptions(),this.isResponse=!1,this.loading=!1,n.a.$emit("refreshSubscribeStatus"),this.$emit("fromFooter")}}},d=r(37),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-modal",{ref:"subscriber-modal",attrs:{id:"subscriber-modal",size:"lg","hide-header":"","hide-footer":"","hide-header-close":"","no-close-on-backdrop":"","body-class":"p-0","modal-class":"right"},on:{hidden:t.onModelHide}},[o("b-container",{staticClass:"px-0"},[o("b-row",{staticClass:"mx-0"},[o("a",{staticClass:"cursor-pointer d-inline-block position-absolute text-primary text-center line-height-40 heading-5 text-decoration-none modal-close-position-demo-form",style:{width:"40px",height:"40px",zIndex:9},on:{click:function(e){return t.$refs["subscriber-modal"].hide()}}},[o("i",{staticClass:"cyicon-close"})]),t._v(" "),o("b-col",{staticClass:"p-0 cy-bg-lighter-blue",attrs:{cols:"12"}},[o("b-row",{staticClass:"m-0 justify-content-start align-items-center mt-3"},[o("b-col",{staticClass:"px-md-5 pb-md-0 pb-4",attrs:{cols:"6"}},[o("h2",{staticClass:"mb-0 cy-text-nile-blue mx-auto pt-3 cy-heading-2 font-weight-bolder"},[t._v("\n                Get the\n                "+t._s(t.fromFooter?"Cyware Newsletter":t.$route.meta.title)+"\n                delivered to your email!\n              ")])]),t._v(" "),o("b-col",{staticClass:"text-center",attrs:{cols:"6"}},[o("b-img-lazy",{class:"research-and-analysis"===t.$route.meta.slug?"":"w-50 h-75",attrs:{src:r(539)("./static".concat(t.$route.meta.headerImg?t.$route.meta.headerImg:"/blog/blog.png")),alt:t.$route.meta.title||"Cyware Newsletter",title:t.$route.meta.title||"Cyware Newsletter",fluid:""}})],1)],1)],1),t._v(" "),o("b-col",{staticClass:"px-0",attrs:{cols:"12"}},[t.isResponse?o("div",{staticClass:"p-3 h-100 d-flex justify-content-center align-items-center my-5"},[o("div",{staticClass:"text-center py-4"},[o("p",[o("span",{staticClass:"cyicon-check-circle cy-heading-1 cy-text-primary"})]),t._v(" "),o("h3",{staticClass:"cy-text-primary cy-heading-3 cy-word-break"},[t._v("\n                Thank you for your subscription."),o("br"),t._v("\n                You will be receiving emails on\n                "),o("strong",[t._v(t._s(t.subscriberModel.email_id))])]),t._v(" "),o("div",{staticClass:"w-100 mt-3 cy-heading-4"},[o("a",{attrs:{href:"/dashboard/subscriptions"}},[t._v("\n                  Manage My Subscriptions\n                ")])])])]):o("div",{staticClass:"p-5"},[o("ValidationObserver",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(e){var r=e.passes;return[o("b-form",{on:{submit:function(e){return e.preventDefault(),r(t.onSubmit)}}},[t.subscriptionList.filter((function(t){return t.is_subscribed})).length>0?o("b-form-group",{attrs:{label:"You are about to Subscribe"}},[o("b-form-checkbox-group",{staticClass:"d-flex m-r-0-last flex-wrap mb-2 mt-2",attrs:{id:"curentsubscribedList",name:"curentsubscribedList"},model:{value:t.subscriberModel.subscription,callback:function(e){t.$set(t.subscriberModel,"subscription",e)},expression:"subscriberModel.subscription"}},t._l(t.subscriptionList.filter((function(t){return!0===t.is_subscribed})),(function(e){return o("b-form-checkbox",{key:e.slug,staticClass:"mt-2 mt-md-0 mr-3",attrs:{value:e,title:e.title},nativeOn:{click:function(r){return t.deSelectSubscription(e)}}},[o("div",{staticClass:"demo-product-icon mb-3"},[o("div",{staticClass:"d-flex align-items-center"},[o("div",[t._v("\n                            "+t._s(e.title)+"\n                            "),o("span",{staticClass:"pl-2 cy-plus-icon"},[t._v("+")]),t._v(" "),o("i",{staticClass:"cyicon-check pl-1"})])])])])})),1)],1):t._e(),t._v(" "),t.subscriptionList.filter((function(t){return!1===t.is_subscribed})).length>0?o("b-form-group",{attrs:{label:"You can also subscribe to our other resources and stay updated!"}},t._l(t.subscriptionList.filter((function(t){return!1===t.is_subscribed})),(function(e){return o("button",{key:e.slug,staticClass:"demo-product-icon mb-2 mt-2 mr-3 cursor-pointer",on:{click:function(r){return t.selectCurrentSubscription(e.slug)}}},[o("div",{staticClass:"d-flex align-items-center"},[o("div",[t._v("\n                        "+t._s(e.title)+"\n                        "),o("span",{staticClass:"pl-2 cy-plus-icon"},[t._v("+")]),t._v(" "),o("i",{staticClass:"cyicon-check pl-1"})])])])})),0):t._e(),t._v(" "),t.isAuthenticated?t._e():o("b-row",{staticClass:"mb-4"},[o("b-col",{attrs:{md:"6",xs:"12"}},[o("b-form-group",{attrs:{label:"Your email address"}},[o("cy-input-map",{attrs:{id:"email_1",maxlength:100,rules:{required:!0,email:!0},type:"email",name:"email",vid:"email",label:"Your email address",placeholder:"yourname@company.com"},model:{value:t.subscriberModel.email_id,callback:function(e){t.$set(t.subscriberModel,"email_id",e)},expression:"subscriberModel.email_id"}})],1)],1)],1),t._v(" "),!t.isAuthenticated||t.userDetails&&t.userDetails.subscription.filter((function(t){return!1===t.is_subscribed})).length>0?o("div",{staticClass:"d-flex my-3 align-items-center flex-wrap"},[o("b-button",{staticClass:"cy-btn cy-btn--primary cy-btn--extra-padding",attrs:{type:"submit"}},[o("span",{staticClass:"d-inline-block cy-font-weight-800 text-uppercase"},[t._v(t._s(t.loading?"Loading...":"Subscribe"))])])],1):t._e(),t._v(" "),o("hr")],1)]}}])}),t._v(" "),t.getSubscribedList()?o("h2",{staticClass:"cy-heading-4 mb-3 mt-3 cy-line-height-25"},[t._v("\n              You are currently subscribed to\n              "),o("strong",[t._v(t._s(t.getSubscribedList())+" ")])]):t._e(),t._v(" "),o("div",{staticClass:"w-100 mt-2 cy-heading-4 cy-font-weight-600"},[o("a",{attrs:{href:"/dashboard/subscriptions"}},[t._v(" Manage My Subscriptions ")])])],1)])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);
//# sourceMappingURL=4bbc5ef.modern.js.map
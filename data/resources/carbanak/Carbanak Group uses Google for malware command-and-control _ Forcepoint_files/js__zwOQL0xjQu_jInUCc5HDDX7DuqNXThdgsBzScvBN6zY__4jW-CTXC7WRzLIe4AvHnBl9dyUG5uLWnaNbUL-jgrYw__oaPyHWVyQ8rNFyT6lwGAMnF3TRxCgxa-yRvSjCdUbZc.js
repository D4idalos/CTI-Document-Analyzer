/* Source and licensing information for the line(s) below can be found at https://www.forcepoint.com/sites/all/modules/contrib/views/js/ajax_view.js. */
(function($){Drupal.behaviors.ViewsAjaxView={};Drupal.behaviors.ViewsAjaxView.attach=function(){if(Drupal.settings&&Drupal.settings.views&&Drupal.settings.views.ajaxViews){$.each(Drupal.settings.views.ajaxViews,function(i,settings){Drupal.views.instances[i]=new Drupal.views.ajaxView(settings);});}};Drupal.views={};Drupal.views.instances={};Drupal.views.ajaxView=function(settings){var selector='.view-dom-id-'+settings.view_dom_id;this.$view=$(selector);var ajax_path=Drupal.settings.views.ajax_path;if(ajax_path.constructor.toString().indexOf("Array")!=-1){ajax_path=ajax_path[0];}
var queryString=window.location.search||'';if(queryString!==''){var queryString=queryString.slice(1).replace(/q=[^&]+&?|&?render=[^&]+/,'');if(queryString!==''){queryString=((/\?/.test(ajax_path))?'&':'?')+queryString;}}
this.element_settings={url:ajax_path+queryString,submit:settings,setClick:true,event:'click',selector:selector,progress:{type:'throbber'}};this.settings=settings;this.$exposed_form=$('#views-exposed-form-'+settings.view_name.replace(/_/g,'-')+'-'+settings.view_display_id.replace(/_/g,'-'));this.$exposed_form.once(jQuery.proxy(this.attachExposedFormAjax,this));this.links=[];this.$view.once(jQuery.proxy(this.attachPagerAjax,this));var self_settings=this.element_settings;self_settings.event='RefreshView';var self=this;this.$view.once('refresh',function(){self.refreshViewAjax=new Drupal.ajax(self.selector,self.$view,self_settings);});};Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){var button=$('input[type=submit], button[type=submit], input[type=image]',this.$exposed_form);button=button[0];$(button).click(function(){if(Drupal.autocompleteSubmit){Drupal.autocompleteSubmit();}});this.exposedFormAjax=new Drupal.ajax($(button).attr('id'),button,this.element_settings);};Drupal.views.ajaxView.prototype.attachPagerAjax=function(){this.$view.find('ul.pager > li > a, ol.pager > li > a, th.views-field a, .attachment .views-summary a').each(jQuery.proxy(this.attachPagerLinkAjax,this));};Drupal.views.ajaxView.prototype.attachPagerLinkAjax=function(id,link){var $link=$(link);var viewData={};var href=$link.attr('href');if($link.closest('.view')[0]!==this.$view[0]&&$link.closest('.view').parent().hasClass('attachment')===false){return;}
if(typeof(viewData.page)==='undefined'){viewData.page=0;}
$.extend(viewData,this.settings,Drupal.Views.parseQueryString(href),Drupal.Views.parseViewArgs(href,this.settings.view_base_path));$.extend(viewData,Drupal.Views.parseViewArgs(href,this.settings.view_base_path));this.element_settings.submit=viewData;this.pagerAjax=new Drupal.ajax(false,$link,this.element_settings);this.links.push(this.pagerAjax);};Drupal.ajax.prototype.commands.viewsScrollTop=function(ajax,response,status){var offset=$(response.selector).offset();var scrollTarget=response.selector;while($(scrollTarget).scrollTop()==0&&$(scrollTarget).parent()){scrollTarget=$(scrollTarget).parent();}
if(offset.top-10<$(scrollTarget).scrollTop()){$(scrollTarget).animate({scrollTop:(offset.top-10)},500);}};})(jQuery);;;
/* Source and licensing information for the above line(s) can be found at https://www.forcepoint.com/sites/all/modules/contrib/views/js/ajax_view.js. */
;/*})'"*/
/* Source and licensing information for the line(s) below can be found at https://www.forcepoint.com/sites/all/modules/contrib/views_ajax_history/views_ajax_history.js. */
(function($){var original={path:window.location.href,query:window.location.search||''};var beforeSubmit=Drupal.ajax.prototype.beforeSubmit;var beforeSerialize=Drupal.ajax.prototype.beforeSerialize;Drupal.behaviors.viewsAjaxHistory={attach:function(context,settings){var $body=$('body').once('views-ajax-history-first-page-load');if($body.length){settings.viewsAjaxHistory.onloadPageItem=settings.viewsAjaxHistory.renderPageItem;}}};var parseQueryString=function(query){var args={};var pos=query.indexOf('?');if(pos!=-1){query=query.substring(pos+1);}
var pairs=query.split('&');var pair,key,value;for(var i in pairs){if(typeof(pairs[i])=='string'){pair=pairs[i].split('=');if(pair[0]!='q'&&pair[1]){key=decodeURIComponent(pair[0].replace(/\+/g,' '));value=decodeURIComponent(pair[1].replace(/\+/g,' '));if(/\[\]$/.test(key)){if(!(key in args)){args[key]=[value];}
else if(!$.inArray(value,args[key])!==-1){args[key].push(value);}}
else{args[key]=value;}}}}
return args;};var cleanURL=function(url,viewArgs){var args=parseQueryString(url);var query=[];if(/\?/.test(Drupal.settings.views.ajax_path)){query.push('q='+Drupal.Views.getPath(url));}
$.each(args,function(name,value){if(name in viewArgs){value=viewArgs[name];}
if($.isArray(value)){$.merge(query,$.map(value,function(sub){return name+'='+sub;}));}
else{query.push(name+'='+value);}});url=url.split('?');return url[0]+(query.length?'?'+query.join('&'):'');};var addState=function(options,url){Drupal.settings.viewsAjaxHistory.lastViewDomID=options.data.view_dom_id;$(window).unbind('statechange',loadView);History.pushState(options,document.title,cleanURL(url,options.data));$(window).bind('statechange',loadView);};var loadView=function(){var state=History.getState();var options=state.data;if(typeof options.data=='undefined'){var viewsAjaxSettingsKey='views_dom_id:'+Drupal.settings.viewsAjaxHistory.lastViewDomID;if(Drupal.settings.views.ajaxViews.hasOwnProperty(viewsAjaxSettingsKey)){var viewsAjaxSettings=Drupal.settings.views.ajaxViews[viewsAjaxSettingsKey];viewsAjaxSettings.page=Drupal.settings.viewsAjaxHistory.onloadPageItem;options={data:viewsAjaxSettings,url:Drupal.settings.views.ajax_path};}}
var $dummy=$('<div class="ajaxHistoryDummy"/>');var settings=$.extend({submit:options.data,setClick:true,event:'click',selector:'.view-dom-id-'+options.data.view_dom_id,progress:{type:'throbber'}},options);new Drupal.ajax(false,$dummy[0],settings);$dummy.trigger('click');};Drupal.ajax.prototype.beforeSerialize=function($element,options){if(options.data.view_name){if($($element).hasClass('ajaxHistoryDummy')){return;}
options.url=Drupal.settings.views.ajax_path;if($element.is('a')){addState(options,$element.attr('href'));}}
beforeSerialize.apply(this,arguments);};Drupal.ajax.prototype.beforeSubmit=function(form_values,element,options){if(options.data.view_name){var url=original.path+(/\?/.test(original.path)?'&':'?')+element.formSerialize();$.each(form_values,function(){if(/\[\]$/.test(this.name)){if(!options.data[this.name]){options.data[this.name]=[];}
options.data[this.name].push(this.value);}
else{options.data[this.name]=this.value;}});addState(options,url);}
for(var i=0;i<arguments[0].length;i++){if(arguments[0][i].name=='page'){arguments[0][i].value=0;}}
beforeSubmit.apply(this,arguments);};}(jQuery));;;
/* Source and licensing information for the above line(s) can be found at https://www.forcepoint.com/sites/all/modules/contrib/views_ajax_history/views_ajax_history.js. */
;/*})'"*/
